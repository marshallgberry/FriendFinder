<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

   
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css" >
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    
    

    <title>Friend Finder</title>
</head>

<body>

        <div class="jumbotron">
            <div class="container">
                <h1>
                    <h1 id="title">
                    <a class="btn fa fa-facebook-square" href="/app/public/home.html" aria-hidden="true"></a>
                    <strong>Friend Finder</strong>
                </h1>
                <hr>
                <h2><strong>Survey Questions</strong></h2>
            </div>
        </div>
    
    
        <div class="container">
    
            <h3>
                <strong>About You</strong>
            </h3>
    
            <hr>

            <h4>Name (Required)</h4>
            <input type="text" id="name" class="form-control valid" required="">
    
            <h4>Link to Photo Image (Required)</h4>
            <input type="text" id="photo" class="form-control valid" required="">
    
            <hr>
    
            <h4>Question 1</h4>
            <div class="form-group ">
                <label for="question1">You love to rock the party.</label>
                <select class="form-control valid" id="question1">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 2</h4>
            <div class="form-group">
                <label for="question2">The Earth is flat.</label>
                <select class="form-control valid" id="question2">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 3</h4>
            <div class="form-group">
                <label for="question3">EDM is the worst.</label>
                <select class="form-control valid" id="question3">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 4</h4>
            <div class="form-group">
                <label for="question4">Others call you "Whiskers" because you're curious like a cat.</label>
                <select class="form-control valid" id="question4">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 5</h4>
            <div class="form-group">
                <label for="question5">Donald Trump is the most diabolical hater this side of the Mississippi.</label>
                <select class="form-control valid" id="question5">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 6</h4>
            <div class="form-group">
                <label for="question6">You are down with O.P.P.</label>
                <select class="form-control valid" id="question6">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 7</h4>
            <div class="form-group">
                <label for="question7">You dig music but not shitty music(EDM).</label>
                <select class="form-control valid" id="question7">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 8</h4>
            <div class="form-group">
                <label for="question8">You have only killed once.</label>
                <select class="form-control valid" id="question8">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 9</h4>
            <div class="form-group">
                <label for="question9">Eat tacos, live forever.</label>
                <select class="form-control valid" id="question9">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <h4>Question 10</h4>
            <div class="form-group">
                <label for="question10">You enjoy doing hood rat shit.</label>
                <select class="form-control valid" id="question10">
                    <option value="" selected disabled>Select an Answer</option>
                    <option value="1">1 (No, Absolutely Not!)</option>
                    <option value="2">2</option>
                    <option value="3">3 (Sometimes)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Yes, Absolutely Always!)</option>
                </select>
            </div>
    
            <!--submit button-->
            <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
                <i class="fa fa-check-circle" aria-hidden="true"></i>
                Submit</button>
    
            <hr>
            <footer class="footer">
                <div class="container">
                    <p>
                        <a href="/api/friend">API Friends List</a> |
                        <a href="https://github.com/marshallgberry/FriendFinder">GitHub Repo</a> |
                        <a href="https://www.latlmes.com/arts/return-of-the-golden-age-of-comics-1">Your Wildest Dreams</a>
                    </p>
                </div>
            </footer>
    
        </div>
    
            
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="myModalLabel">Meet Your New Best Friend Forever!</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body" id="friendName">
                        </div>
                        <img id="friendPic" src="" alt="Image Unavailable" width = 300px>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                         
                        </div>
                      </div>
                    </div>
                  </div>

    
    </body>
    
    </html>
    
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script type="text/javascript">
     
     
    
        $("#submit").on("click", function (event) {
            event.preventDefault();
            function checkSurvey() {
                var surveyComplete = true;
                $(".valid").each(function () {
                    if ($(this).val() === '') {
                        surveyComplete = false;
                    }
                });
                return surveyComplete;
            }
            if (checkSurvey() === true) {
                //grabs survey elements
                var newFriend = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#question1").val(),
                        $("#question2").val(),
                        $("#question3").val(),
                        $("#question4").val(),
                        $("#question5").val(),
                        $("#question6").val(),
                        $("#question7").val(),
                        $("#question8").val(),
                        $("#question9").val(),
                        $("#question10").val()
                    ]
                };
                console.log(newFriend);
    
                //ajax
                var currentURL = window.location.origin;
                $.post(currentURL + "/api/friend", newFriend,
                    function (data) {
                        console.log(data.photo)
                        $("#friendName").text(data.name);
                        $("#friendPic").attr("src", data.photo)
                        console.log($("#friendPic").attr("src", data.photo))
                    });
                
                    $('#myModal').modal();

                    
                //clears survey when submitted
                $("#name").val("");
                $("#photo").val("");
                $("#question1").val("");
                $("#question2").val("");
                $("#question3").val("");
                $("#question4").val("");
                $("#question5").val("");
                $("#question6").val("");
                $("#question7").val("");
                $("#question8").val("");
                $("#question9").val("");
                $("#question10").val("");
            } else {
                 
                //an unnecessary custom alert box
            var ALERT_TITLE = "You did not fill the survey out correctly! Do you even want a best friend?!";
            var ALERT_BUTTON_TEXT = "Close to do it right!";

                if(document.getElementById) {
                window.alert = function(txt) {
                createCustomAlert(txt);
          }
      }

      function createCustomAlert(txt) {
          d = document;

          if(d.getElementById("modalContainer")) return;

          mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
          mObj.id = "modalContainer";
          mObj.style.height = d.documentElement.scrollHeight + "px";

          alertObj = mObj.appendChild(d.createElement("div"));
          alertObj.id = "alertBox";
          if(d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
          alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth)/2 + "px";
          alertObj.style.visiblity="visible";

          h1 = alertObj.appendChild(d.createElement("h1"));
          h1.appendChild(d.createTextNode(ALERT_TITLE));

          msg = alertObj.appendChild(d.createElement("p"));
          //msg.appendChild(d.createTextNode(txt));
          msg.innerHTML = txt;

          btn = alertObj.appendChild(d.createElement("a"));
          btn.id = "closeBtn";
          btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
          btn.href = "#";
          btn.focus();
          btn.onclick = function() { removeCustomAlert();return false; }

          alertObj.style.display = "block";

      }

      function removeCustomAlert() {
          document.getElementsByTagName("body")[0].removeChild(document.getElementById("modalContainer"));
      }
      alert("");

            };
        });
    </script>